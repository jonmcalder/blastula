<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easily Send HTML Email Messages • blastula</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Easily Send HTML Email Messages">
<meta property="og:description" content="Compose and send out responsive HTML email messages that render
    perfectly across a range of email clients and device sizes. Messages are
    composed using 'Markdown' and a text interpolation system that allows for
    the injection of evaluated R code within the message body, footer, and
    subject line. Helper functions let the user insert embedded images, web
    link buttons, and 'ggplot2' plot objects into the message body. Messages
    can be sent through an 'SMTP' server or through the 'Mailgun' API service
    &lt;http://mailgun.com/&gt;.">
<meta property="og:image" content="https://rich-iannone.github.io/blastula/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">blastula</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/simple_composition.html">Simple Email Composition</a>
    </li>
    <li>
      <a href="articles/sending_using_smtp.html">Sending Email Using SMTP</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rich-iannone/blastula">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="blastula" class="section level1">

<!-- badges: start -->

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <strong>blastula</strong> package makes it easy to produce and send HTML email from <strong>R</strong>. The message can have three content areas (the body, the header, and the footer) and we can insert <strong>Markdown</strong> text, <strong>R</strong> expressions, block-based components, and even some raw HTML. The underlying HTML/CSS is meant to display properly across a wide range of email clients and webmail services. The resulting email message is responsive so it’ll look great on computers and mobile devices.</p>
</div>
<div id="an-example" class="section level2">
<h2 class="hasAnchor">
<a href="#an-example" class="anchor"></a>An Example</h2>
<div id="composing-an-email-message" class="section level3">
<h3 class="hasAnchor">
<a href="#composing-an-email-message" class="anchor"></a>Composing an Email Message</h3>
<p>When you compose an email, you can use objects from the global workspace and work them into the message content. Let’s create a nicely formatted date/time string (<code>current_date_time</code>) with the <code><a href="reference/add_readable_time.html">add_readable_time()</a></code> function, and, assign a link to a web image to an object (<code>img_link</code>).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Get a nicely formatted date/time string</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">current_date_time &lt;-<span class="st"> </span><span class="kw"><a href="reference/add_readable_time.html">add_readable_time</a></span>()</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Assign an URL with an image to `img_link`</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">img_link &lt;-<span class="st"> "https://i.imgur.com/p1KvgYj.png"</span></a></code></pre></div>
<p>Now we use the <code><a href="reference/compose_email.html">compose_email()</a></code> function to compose the email. There are three main arguments here: <code>body</code>, <code>header</code>, and <code>footer</code>. You can supply <strong>Markdown</strong> text to any of these content areas to get rendered HTML.</p>
<p>The insertion of text can be performed by enclosing valid <strong>R</strong> code inside of curly braces (<code>{...}</code>). In the example code below, the image URL (as part of the <code>![...](...)</code> <strong>Markdown</strong> link construction) is referenced to the <code>img_link</code> object from the global workspace. Note also that <code>{current_date_time}</code> references the <code>current_date_time</code> character object. The end result is the insertion of the date/time string into the footer of the email. (Alternatively, <code><a href="reference/add_readable_time.html">add_readable_time()</a></code> could have been called directly.)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Generate the body text for the email message</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">email_text &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">"</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">Hello,</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">This is a great photo of Lake Tahoe. I took </span><span class="ch">\\</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">it using my new camera.</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">![]({img_link})</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">      </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">You *should go* if you get the chance.</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="st">"</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">email_object &lt;-</a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="reference/compose_email.html">compose_email</a></span>(</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">    <span class="dt">body =</span> email_text,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">    <span class="dt">footer =</span> <span class="st">"Email sent on {current_date_time}."</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">  )</a></code></pre></div>
<p>After creating the email message, we can look at it to ensure that the formatting is as expected. Simply call the object itself and it will be displayed in the Viewer.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Preview the email</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">email_object</a></code></pre></div>
<p><img src="reference/figures/rstudio_preview_email.png"></p>
</div>
<div id="sending-an-email-message-via-smtp" class="section level3">
<h3 class="hasAnchor">
<a href="#sending-an-email-message-via-smtp" class="anchor"></a>Sending an Email Message via SMTP</h3>
<p>We can store SMTP email credentials in a file using the <code><a href="reference/create_smtp_creds_file.html">create_smtp_creds_file()</a></code> function. This will create a hidden credentials file in the working directory. We can also set SMTP access credentials in the system-wide key-value store through the <code><a href="reference/create_smtp_creds_key.html">create_smtp_creds_key()</a></code> function.</p>
<p>Having generated a credentials file, we can use the <code><a href="reference/smtp_send.html">smtp_send()</a></code> function (along with the <code><a href="reference/credential_helpers.html">creds_file()</a></code> credentials helper function) to send the email through an SMTP server.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Sending email by SMTP using a credentials file</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">email_object <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/smtp_send.html">smtp_send</a></span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">to =</span> <span class="st">"a_user@web.net"</span>,</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="dt">from =</span> <span class="st">"personal@email.net"</span>,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">    <span class="dt">subject =</span> <span class="st">"Testing the `smtp_send()` function"</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">    <span class="dt">credentials =</span> <span class="kw"><a href="reference/credential_helpers.html">creds_file</a></span>(<span class="st">"email_creds"</span>)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  )</a></code></pre></div>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The <strong>blastula</strong> package is using a new binary for <code>smtp</code> mailing, provided by the <strong>mailsend-go</strong> project. This binary is cross-platform and works on <strong>Windows</strong>, <strong>macOS</strong> (via <strong>Homebrew)</strong>, and <strong>Linux</strong> (<strong>Debian</strong> and <strong>RPM</strong> packages). Information on installation and other important considerations for SMTP sending can be found in <a href="https://rich-iannone.github.io/blastula/articles/sending_using_smtp.html">this article</a>.</p>
<p>You can install the in-development version of <strong>blastula</strong> from <strong>GitHub</strong> using the <strong>remotes</strong> package.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"rich-iannone/blastula"</span>)</a></code></pre></div>
<p>If you encounter a bug, have usage questions, or want to share ideas to make this package better, feel free to file an <a href="https://github.com/rich-iannone/blastula/issues">issue</a>.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>MIT © Richard Iannone</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=blastula">https://​cloud.r-project.org/​package=blastula</a>
</li>
<li>Browse source code at <br><a href="https://github.com/rich-iannone/blastula">https://​github.com/​rich-iannone/​blastula</a>
</li>
<li>Report a bug at <br><a href="https://github.com/rich-iannone/blastula/issues">https://​github.com/​rich-iannone/​blastula/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Richard Iannone <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3925-190X" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/rich-iannone/blastula"><img src="https://travis-ci.org/rich-iannone/blastula.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/rich-iannone/blastula?branch=master"><img src="https://codecov.io/gh/rich-iannone/blastula/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Richard Iannone.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
